<!--<!DOCTYPE html>-->
<html>
  <head>
    <style>
      body {
        font-family: "Helvetica Neue", helvetica, arial;
        padding: 15px;
      }

      ul {
        list-style: none;
        margin: 0;
        padding: 0;
      }

      ul li {
        line-height: 1.4;
      }

      #map-canvas { 
        height: 100%; 
        margin: 0; 
        padding: 0;
      }

    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBSst7-DAQ15cItT_EQsnTnoy6iwFyHS0c">
    </script>
    <script type="text/javascript">

      function addMarker(e){
        //console.log(e.latLng);
        if(document.ready){
           this.ws.send('hello');
        }
      }

      function updateMakers(e){
        console.log(e);
      }

      function initialize() {

        var host = location.origin.replace(/^http/, 'ws');
        ws = new WebSocket(host);
        ws.onmessage = function (event) {
          console.log(JSON.parse(event.data));
        };

        var mapOptions = {
          center: { lat: 40.782648, lng: -74.078232},
          zoom: 16,
          mapTypeId: google.maps.MapTypeId.HYBRID
        };
        var map = new google.maps.Map(document.getElementById('map-canvas'),
            mapOptions);

        google.maps.event.addDomListener(map, 'click', addMarker());

      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map-canvas"></div>
    <button type="button">mybutton</button>
  </body>
</html>
